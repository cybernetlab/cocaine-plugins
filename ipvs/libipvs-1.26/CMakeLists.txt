LOCATE_LIBRARY(LIBNL "libnl3/netlink/netlink.h" "nl-3")
LOCATE_LIBRARY(LIBNLGENL "libnl3/netlink/netlink.h" "nl-genl-3")

INCLUDE_DIRECTORIES(
    ${LIBNL_INCLUDE_DIRS})

LINK_DIRECTORIES(
    ${LIBNL_LIBRARY_DIRS}
    ${LIBNLGENL_LIBRARY_DIRS})

ADD_LIBRARY(ipvs STATIC
    libipvs
    ip_vs_nl_policy)

SET_TARGET_PROPERTIES(ipvs PROPERTIES
    COMPILE_FLAGS "-fpic"
    COMPILE_DEFINITIONS "LIBIPVS_USE_NL")

TARGET_LINK_LIBRARIES(ipvs ${LIBNL_LIBRARIES} ${LIBNLGENL_LIBRARIES})
